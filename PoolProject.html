<!DOCTYPE html>
<html>
	<head>
		<style>
			#table {
				width: 700px;
				height: 350px;
				border: 3px solid black;
				background-color: green;
			}
		</style>
		<meta charset="UTF-8">
		<title>Pool Game</title>
	</head>
	<body>
		<button onclick="startGame(true)">Click to play 8 ball pool</button>
		<button onclick="startGame(false)">Click to play 9 ball pool</button>
		<canvas id="table" width="700" height="350"> </canvas>
	</body>
	<script>
		// canvas varibles
		var table = document.getElementById("table");
		var ctx = table.getContext("2d");

		function getX(){
			//return the x coordinate of something
		}
		function getWidth(){
			//returns width of object
		}
		function getHeight(){
			//returns height of object
		}//these functions needed to get dimensions of table

		var balls = [];
		//balls = startgame(game,balls);
		function startGame(eightBall) {
			//if selected game is false it is nine ball pool, and if it is true, it is eight ball pool
			if(eightBall){
				//array of balls
				//this array sets the positions for a the start of the game
				balls = [
					oneBall = new ball (240,175,"yellow",true,1,0,0),
					twoBall = new ball (180,205,"blue",true,2,0,0),
					threeBall = new ball (180,145,"red",true,3,0,0),
					fourBall = new ball (120,115,"purple",true,4,0,0),
					fiveBall = new ball (120,175,"orange",true,5,0,0),
					sixBall = new ball (150,190,"green",true,6,0,0),
					sevenBall = new ball (120,235,"brown",true,7,0,0),
					eightBall = new ball (180,175,"black",true,8,0,0),
					nineBall = new ball (210,160,"yellow",false,9,0,0),
					tenBall = new ball (210,190,"blue",false,10,0,0),
					elevenBall = new ball (150,130,"red",false,11,0,0),
					twelveBall = new ball (120,145,"purple",false,12,0,0),
					thirteenBall = new ball (150,160,"orange",false,13,0,0),
					fourteenBall = new ball (150,220,"green",false,14,0,0),
					fifthteenBall = new ball (120,205,"brown",false,15,0,0),
					queueBall = new ball (600,175,"white",true,0,0,0)];
				//pockets
				pockets = [
					pocketUpperLeft = new pocket(0, 0),
					pocketUpperMiddle = new pocket(table.width/2, 0),
					pocketUpperRight = new pocket(table.width, 0),
					pocketBottomLeft = new pocket(0, table.height),
					pocketBottomMiddle = new pocket(table.width/2, table.height),
					pocketBottomRight = new pocket(table.width, table.height) ];
				setInterval(animate, 33);
			}else{
				//array of balls
				balls = [
					oneBall = new ball (240,175,"yellow",true,1,0,0),
					twoBall = new ball (120,175,"blue",true,2,0,0),
					threeBall = new ball (210,160,"red",true,3,0,0),
					fourBall = new ball (150,190,"purple",true,4,0,0),
					fiveBall = new ball (210,190,"orange",true,5,0,0),
					sixBall = new ball (150,160,"green",true,6,0,0),
					sevenBall = new ball (180,145,"brown",true,7,0,0),
					eightBall = new ball (180,205,"black",true,8,0,0),
					nineBall = new ball (180,175,"yellow",false,9,0,0),
					queueBall = new ball (600,175,"white",true,0,0,0)];
				//pockets
				pockets = [
					pocketUpperLeft = new pocket(0, 0),
					pocketUpperMiddle = new pocket(table.width/2, 0),
					pocketUpperRight = new pocket(table.width, 0),
					pocketBottomLeft = new pocket(0, table.height),
					pocketBottomMiddle = new pocket(table.width/2, table.height),
					pocketBottomRight = new pocket(table.width, table.height) ];
				setInterval(animate, 33);
			}
		}
		// pocket consuctor
		function pocket(x, y){
			this.x = x;
			this.y = y;
			this.color = "black";
			this.radius = 25
			this.draw = function(){
				ctx.fillStyle = this.color;
				ctx.beginPath();
				ctx.arc(this.x,this.y,this.radius,0,2*Math.PI);
				ctx.fill();
			}
		}
		//this is where the magic happens
		function checker(){
			var stopBalls = true;
			for(i=0;i<balls.length;i++) {
				if(balls[i].vel != 0){
					stopBalls = false;
				}
			}
			if (stopBalls) {
			}
		}
		//animate functions
		function animate(){
			clearCanvas();
			for(i=0;i<balls.length;i++) {
				balls[i].draw();
			}
			for(i=0;i<pockets.length;i++) {
				pockets[i].draw();
			}
		}
		function clearCanvas(){
			ctx.fillStyle = "#00AF00";
			ctx.fillRect(0,0,700,350);
		}
		function TraverseAndSendToCollisionDetector(){ //where should we call this?
			for (i = 0; i < balls.length; i++){
				for ( u = 0; u < pockets.length; u++){
				if(CheckingForCollisionsWithPocket(balls[i], pocket[u])){
					//bounce off border --> need the physics for this!

				}
				if(CheckingForCollisionsWithBorder(balls[i])){
					score()//we need to make this function. Should count a score and maybe congradulate scorer?
				}
			}
		}
	} 
	function CheckingForCollisionsWithBorder(obj){
		return ( obj.x < 0 || obj.x + obj.width > canvas.width
		|| obj.y < 0 || obj.y + obj.height > canvas.height)
		}
		function CheckingForCollisionWithPocket(b1,b2) {
			// this colloisition takes the x value then finds the corasponing distance the Y should be to ensure collisition
			var xSide = Math.abs(b1.x-b2.y);
			var ySide = Math.abs(b1.y-b2.y);
			var radCheck = Math.sqr(Math.pow(xSide,2) + Math.pow(ySide,2));
			if( radCheck < b1.radius + b2.radius) {
				return true;
			}
		}
		function score(){
			scorecount++; //need to define this variable somehwere, should it be global?
			alert("Nice shot!") // or text that appears 
			if(scorecount == 8){ //but should depend on game
				gameover();//or what do we want to do where
				}
		}
		// ball constructor
		function ball (x,y,color,solid,Bn,v,a) {
			this.color = color;
			this.x = x;
			this.y = y;
			this.solid = solid;
			this.ballNum = Bn;
			this.xcel = a;
			this.vel = v;
			this.mass;
			//draw method
			this.draw = function (){
				if(this.solid) {
					ctx.fillStyle = this.color;
					ctx.beginPath();
					ctx.arc(this.x,this.y,15,0,2*Math.PI);
					ctx.fill();
					ctx.fillStyle = "white";
					ctx.beginPath();
					ctx.arc(this.x + 5,this.y - 5,3,0,2*Math.PI);
					ctx.fill();
				}else{
					ctx.fillStyle = "white"
					ctx.beginPath();
					ctx.arc(this.x,this.y,15,0,2*Math.PI);
					ctx.fill();
					ctx.fillStyle = this.color;
					ctx.fillRect(this.x - 8, this.y - 12, 16,24);
				}
			}
		}
	</script>
</html>
